<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="scrolling_spectro create videos of single row spectrograms scrolling from right to left sync'ed with sound."><title>Create scrolling dynamic spectrograms — scrolling_spectro • dynaSpec</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create scrolling dynamic spectrograms — scrolling_spectro"><meta property="og:description" content="scrolling_spectro create videos of single row spectrograms scrolling from right to left sync'ed with sound."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dynaSpec</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/maRce10/dynaSpec/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create scrolling dynamic spectrograms</h1>
      <small class="dont-index">Source: <a href="https://github.com/maRce10/dynaSpec/blob/HEAD/R/scrolling_spectro.R" class="external-link"><code>R/scrolling_spectro.R</code></a></small>
      <div class="d-none name"><code>scrolling_spectro.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>scrolling_spectro</code> create videos of single row spectrograms scrolling from right to left sync'ed with sound.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">scrolling_spectro</span><span class="op">(</span><span class="va">wave</span>, file.name <span class="op">=</span> <span class="st">"scroll.spectro.mp4"</span>, hop.size <span class="op">=</span> <span class="fl">11.6</span>, wl <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>ovlp <span class="op">=</span> <span class="fl">70</span>, flim <span class="op">=</span> <span class="cn">NULL</span>, pal <span class="op">=</span> <span class="fu">seewave</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/seewave/man/seewave.internal.html" class="external-link">reverse.gray.colors.1</a></span>, speed <span class="op">=</span> <span class="fl">1</span>, fps <span class="op">=</span> <span class="fl">50</span>, </span>
<span>t.display <span class="op">=</span> <span class="fl">1.5</span>, fix.time <span class="op">=</span> <span class="cn">TRUE</span>, res <span class="op">=</span> <span class="fl">70</span>, </span>
<span>width <span class="op">=</span> <span class="fl">700</span>, height <span class="op">=</span> <span class="fl">400</span>, parallel <span class="op">=</span> <span class="fl">1</span>, pb <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span> play <span class="op">=</span> <span class="cn">TRUE</span>, loop <span class="op">=</span> <span class="fl">1</span>, lcol <span class="op">=</span> <span class="st">"#07889B99"</span>, </span>
<span> lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">2</span>, axis.type <span class="op">=</span> <span class="st">"standard"</span>, buffer <span class="op">=</span> <span class="fl">1</span>, </span>
<span> ggspectro <span class="op">=</span> <span class="cn">FALSE</span>, lower.spectro <span class="op">=</span> <span class="cn">TRUE</span>, height.prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span>, derivative <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span> osc <span class="op">=</span> <span class="cn">FALSE</span>, colwave <span class="op">=</span> <span class="st">"black"</span>, colbg <span class="op">=</span> <span class="st">"white"</span>,</span>
<span> spectro.call <span class="op">=</span> <span class="cn">NULL</span>, annotation.call <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>wave</dt>
<dd><p>object of class 'Wave'.</p></dd>


<dt>file.name</dt>
<dd><p>Character string with the name of the output video file. Must include the .mp4 extension. Default is 'scroll.spectro.mp4'.</p></dd>


<dt>hop.size</dt>
<dd><p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 11.6 ms, which is equivalent to 512 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p></dd>


<dt>wl</dt>
<dd><p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is NULL. If supplied, 'hop.size' is ignored.</p></dd>


<dt>ovlp</dt>
<dd><p>Numeric vector of length 1 specifying the percent overlap between two 
consecutive windows, as in <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>. Default is 70.</p></dd>


<dt>flim</dt>
<dd><p>A numeric vector of length 2 specifying  limits in the frequency axis (in kHz). Default is <code>NULL</code> (which means from 0 to Nyquist frequency).</p></dd>


<dt>pal</dt>
<dd><p>Character string with the color palette to be used. Default is 'reverse.gray.colors.1'.</p></dd>


<dt>speed</dt>
<dd><p>Numeric vector of length 1 indicating the speed at which the sound file will be reproduced (default is 1, normal speed). Values &lt; 1 (but higher than 0) slow down while values &gt; 1 speed up. Note that changes in speed are achieved by modifying the number of frames per second in the output video. Hence, you may want to adjust 'fps' if video quality is considerably affected.</p></dd>


<dt>fps</dt>
<dd><p>Numeric vector of length 1 specifying the number of frames per second.</p></dd>


<dt>t.display</dt>
<dd><p>Numeric vector of length 1 specifying the time range displayed in the spectrogram.</p></dd>


<dt>fix.time</dt>
<dd><p>Logical argument to control if the time axis moves along with the spectrogram or remains fixed. Default is <code>TRUE</code> (fixed).</p></dd>


<dt>res</dt>
<dd><p>Numeric vector of length 1 specifying the resolution of the image files (see <code><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">png</a></code>).</p></dd>


<dt>width</dt>
<dd><p>Numeric vector of length 1 specifying width of the video frame in pixels (see <code><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">png</a></code>). Default is 700.</p></dd>


<dt>height</dt>
<dd><p>Numeric vector of length 1 specifying height of the video frame in pixels (see <code><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">png</a></code>). Default is 400.</p></dd>


<dt>parallel</dt>
<dd><p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p></dd>


<dt>pb</dt>
<dd><p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p></dd>


<dt>play</dt>
<dd><p>Logical argument to control if the video is played after generated. Default is <code>TRUE</code>.</p></dd>


<dt>loop</dt>
<dd><p>Logical argument to control if the video is formatted to be played in a loop (i.e. if ends at the start of the clip).</p></dd>


<dt>lcol</dt>
<dd><p>Character string with the color to be used for the vertical line at which sounds are played. Default is <code>"#07889B99"</code>.</p></dd>


<dt>lty</dt>
<dd><p>Character string to control the type of the line at which sounds are played. Line types can either be specified as an integer (0=blank, 1=solid (default), 2=dashed, 3=dotted, 4=dotdash, 5=longdash, 6=twodash) or as one of the character strings "blank", "solid", "dashed", "dotted", "dotdash", "longdash", or "twodash", where "blank" uses 'invisible lines' (i.e., does not draw them).Default is 2.</p></dd>


<dt>lwd</dt>
<dd><p>Character string to control the width of the line at which sounds are played. Default is 2.</p></dd>


<dt>axis.type</dt>
<dd><p>Character string to control the style of spectrogram axes. Currently there are 3 options:</p><ul><li><p><code>standard</code>: Both Y and X axes are printed as in the default <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code> view.</p></li>
<li><p><code>minimal</code>: Single lines are used to denote the range defined by 1 s and 1 kHz for the X and Y axes respectively.</p></li>
<li><p><code>none</code>: No axis is printed (also removes ticks, tick labels, and axis labels).</p></li>
</ul></dd>


<dt>buffer</dt>
<dd><p>Numeric vector of length 1 (&gt; 0) specifying the time to delay the start of the spectrogram scrolling (in seconds). Default is 1. Not available when loop is &gt; 1.</p></dd>


<dt>ggspectro</dt>
<dd><p>Logical argument to control if a ggspectro (<code><a href="https://rdrr.io/pkg/seewave/man/ggspectro.html" class="external-link">ggspectro</a></code>) is used instead. Note that there is much less control on display parameters when <code>ggpsectro = TRUE</code>. Default is <code>FALSE</code>.</p></dd>


<dt>lower.spectro</dt>
<dd><p>Logical argument to control if a spectrogram of the full wave object is plotted at the bottom of the graph. Default is <code>TRUE</code>.</p></dd>


<dt>height.prop</dt>
<dd><p>Numeric vector of length 2 to control the relative height of the scrolling and lower spectro, respectively. Default is <code>c(5, 1)</code>. Ignored if <code>lower.spectro = FALSE</code>.</p></dd>


<dt>derivative</dt>
<dd><p>Logical argument to control if spectral derivative is used instead of spectrogram (as in Sound Analysis Pro, see <code><a href="https://rdrr.io/pkg/imager/man/deriche.html" class="external-link">deriche</a></code>). Default is <code>FALSE</code>.</p></dd>


<dt>osc</dt>
<dd><p>Logical argument to control if the oscillogram is plotted at the bottom of the spectrogram. Default is <code>FALSE</code>. Note that 'osc' and 'lower.spectro' are mutually exclusive.</p></dd>


<dt>colwave</dt>
<dd><p>Character string to control the color of the oscillogram. Default is 'black'.</p></dd>


<dt>colbg</dt>
<dd><p>Character string to control the background color. Default is 'white'.</p></dd>


<dt>spectro.call</dt>
<dd><p>A call from a spectrogram creating function (i.e. <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>, <code><a href="https://marce10.github.io/warbleR/reference/color_spectro.html" class="external-link">color_spectro</a></code>) generated by the function <code><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></code>. This call will replace the internal spectrogram creating call. Default is <code>NULL</code>.</p></dd>


<dt>annotation.call</dt>
<dd><p>A call from <code><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></code> generated by the function <code><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></code>. The call should also include the argmuents 'start' and 'end' to indicate the time at which the labels are displayed (in s).'fading' is optional and allows fade-in and fade-out effects on labels (in s as well). The position ('x' and 'y' arguments) should be between 0 and 1: <code>x = 0, y = 0</code> corresponds to the bottom left and <code>x = 1, y = 1</code> corresponds to the top right position.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments to be passed to <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code> for customizing spectrograms. Note that 'scale' cannot be included.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A video file in mp4 format in the working directory with the scrolling spectrogram.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function creates videos (mp4 format) of single row spectrograms scrolling from right to left. The audio is sync'ed with the spectrograms. Sound files with a sampling rate other than 44.1 kHz will be resampled to 44.1 kHz as required by ffmpeg when embeding audio to video files.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Araya-Salas M &amp; Wilkins M R. (2020). dynaSpec: dynamic spectrogram visualizations in R. R package version 1.0.0.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># load example data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Phae.long1"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run function</span></span></span>
<span class="r-in"><span><span class="fu">scrolling_spectro</span><span class="op">(</span>wave <span class="op">=</span> <span class="va">Phae.long1</span>, wl <span class="op">=</span> <span class="fl">300</span>, ovlp <span class="op">=</span> <span class="fl">90</span>, </span></span>
<span class="r-in"><span>fps <span class="op">=</span> <span class="fl">50</span>, t.display <span class="op">=</span> <span class="fl">1.5</span>, collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">40</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> pal <span class="op">=</span> <span class="va">reverse.heat.colors</span>, grid <span class="op">=</span> <span class="cn">FALSE</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>, </span></span>
<span class="r-in"><span> res <span class="op">=</span> <span class="fl">120</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Marcelo Araya-Salas.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

