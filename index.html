<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Dynamic Spectrogram Visualizations • dynaSpec</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Dynamic Spectrogram Visualizations">
<meta name="description" content="A set of tools to generate dynamic spectrogram visualizations in video format.">
<meta property="og:description" content="A set of tools to generate dynamic spectrogram visualizations in video format.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">dynaSpec</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/maRce10/dynaSpec/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="dynaspec-dynamic-spectrogram-visualizations">dynaSpec: dynamic spectrogram visualizations<a class="anchor" aria-label="anchor" href="#dynaspec-dynamic-spectrogram-visualizations"></a>
</h1></div>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<!-- badges: start -->

<p><img src="reference/figures/dynaSpec_sticker.png" alt="sketchy sticker" align="right" width="25%" height="25%"></p>
<p>A set of tools to generate dynamic spectrogram visualizations in video format. <a href="https://ffmpeg.org/download.html" class="external-link">FFMPEG</a> must be installed in order for this package to work (check <a href="https://www.rdocumentation.org/packages/ndtv/versions/0.13.3/topics/install.ffmpeg" class="external-link">this link for instructions</a> and this <a href="https://github.com/maRce10/dynaSpec/issues/3" class="external-link">link for troubleshooting installation on Windows</a>). The package relies heavily on the packages <a href="https://CRAN.R-project.org/package=seewave" class="external-link">seewave</a> and <a href="https://CRAN.R-project.org/package=tuneR" class="external-link">tuneR</a>.</p>
<p>Please cite <a href="https://marce10.github.io/dynaSpec/">dynaSpec</a> as follows:</p>
<p>Araya-Salas, Marcelo &amp; Wilkins, Matthew R.. (2020), <em>dynaSpec: dynamic spectrogram visualizations in R</em>. R package version 1.0.0.</p>
<p>Install/load the package from CRAN as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># From CRAN would be</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"dynaSpec"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#load package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/maRce10/dynaSpec" class="external-link">dynaSpec</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># and load other dependencies</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sjmgarnier.github.io/viridis/" class="external-link">viridis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tuner.R-forge.R-project.org" class="external-link">tuneR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rug.mnhn.fr/seewave/" class="external-link">seewave</a></span><span class="op">)</span></span></code></pre></div>
<p>To install the latest developmental version from <a href="https://github.com/" class="external-link">github</a> you will need the R package <a href="https://cran.r-project.org/package=remotes" class="external-link">remotes</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># From github</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"maRce10/dynaSpec"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#load package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/maRce10/dynaSpec" class="external-link">dynaSpec</a></span><span class="op">)</span></span></code></pre></div>
<p>Installation of external dependencies can be tricky on operating systems other than Linux. An alternative option is to run the package through <a href="https://colab.google/" class="external-link">google colab</a>. This <a href="https://colab.research.google.com/drive/1t3Wn9OifcZTvxOMVNmz9dF25vnzU3_Fr?usp=sharing" class="external-link">colab notebook</a> explain how to do that step-by-step.</p>
</div>
<div class="section level1">
<h1 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h1>
<p>This package is a collaboration between <a href="https://marce10.github.io/" class="external-link">Marcelo Araya-Salas</a> and <a href="https://www.mattwilkinsbio.com/" class="external-link">Matt Wilkins</a>. The goal is to create static and dynamic visualizations of sounds, ready for publication or presentation, <em>without taking screen shots</em> of another program. <a href="#marcelos-approach-scrolling-dynamic-spectrograms">Marcelo’s approach</a> (implemented in the scrolling_spectro() function) shows a spectrogram sliding past a fixed point as sounds are played, similar to that utilized in Cornell’s Macaulay Library of Sounds. These dynamic spectrograms are produced natively with base graphics. <a href="#matts-approach-paged-dynamic-spectrograms">Matt’s approach</a> creates “paged” spectrograms that are revealed by a sliding highlight box as sounds are played, akin to Adobe Audition’s spectral view. This approach is in ggplot2 natively, and requires setting up spec parameters and segmenting sound files with prep_static_ggspectro(), the result of which is processed with paged_spectro() to generate a dynamic spectrogram.</p>
<hr>
</div>
<div class="section level1">
<h1 id="marcelos-approach-scrolling-dynamic-spectrograms">Marcelo’s Approach: “Scrolling Dynamic Spectrograms”<a class="anchor" aria-label="anchor" href="#marcelos-approach-scrolling-dynamic-spectrograms"></a>
</h1>
<hr>
<p>To run the following examples you will also need to load a few more packages as well as <a href="https://cran.r-project.org/package=warbleR" class="external-link">warbleR</a> &gt;= 1.1.24. It can be installed as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># From github</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"maRce10/warbleR"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#load package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://marce10.github.io/warbleR/" class="external-link">warbleR</a></span><span class="op">)</span></span></code></pre></div>
<p>A dynamic spectrogram of a canyon wren song with a viridis color palette:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"canyon_wren"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="va">canyon_wren</span>, wl <span class="op">=</span> <span class="fl">300</span>, </span>
<span>              t.display <span class="op">=</span> <span class="fl">1.7</span>, pal <span class="op">=</span> <span class="va">viridis</span>, </span>
<span>              grid <span class="op">=</span> <span class="cn">FALSE</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">9</span><span class="op">)</span>, </span>
<span>              width <span class="op">=</span> <span class="fl">1000</span>, height <span class="op">=</span> <span class="fl">500</span>, </span>
<span>              res <span class="op">=</span> <span class="fl">120</span>, file.name <span class="op">=</span> <span class="st">"default.mp4"</span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/8323b6cd-8ddd-4d4f-9e42-4adad90f2c74" class="external-link uri">https://github.com/user-attachments/assets/8323b6cd-8ddd-4d4f-9e42-4adad90f2c74</a></p>
<p>Black and white spectrogram:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="va">canyon_wren</span>, wl <span class="op">=</span> <span class="fl">300</span>, </span>
<span>          t.display <span class="op">=</span> <span class="fl">1.7</span>, pal <span class="op">=</span> <span class="va">reverse.gray.colors.1</span>, </span>
<span>          grid <span class="op">=</span> <span class="cn">FALSE</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">9</span><span class="op">)</span>, </span>
<span>          width <span class="op">=</span> <span class="fl">1000</span>, height <span class="op">=</span> <span class="fl">500</span>, </span>
<span>          res <span class="op">=</span> <span class="fl">120</span>, file.name <span class="op">=</span> <span class="st">"black_and_white.mp4"</span>,</span>
<span>          collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/2a9adf9b-3618-4700-8843-4412177da0df" class="external-link uri">https://github.com/user-attachments/assets/2a9adf9b-3618-4700-8843-4412177da0df</a></p>
<p>A spectrogram with black background (colbg = “black”):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="va">canyon_wren</span>, wl <span class="op">=</span> <span class="fl">300</span>, </span>
<span>              t.display <span class="op">=</span> <span class="fl">1.7</span>, pal <span class="op">=</span> <span class="va">viridis</span>, </span>
<span>              grid <span class="op">=</span> <span class="cn">FALSE</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">9</span><span class="op">)</span>, </span>
<span>              width <span class="op">=</span> <span class="fl">1000</span>, height <span class="op">=</span> <span class="fl">500</span>, res <span class="op">=</span> <span class="fl">120</span>, </span>
<span>              file.name <span class="op">=</span> <span class="st">"black.mp4"</span>, colbg <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/c4dc7ebc-4406-4d86-a828-94a4f6516762" class="external-link uri">https://github.com/user-attachments/assets/c4dc7ebc-4406-4d86-a828-94a4f6516762</a></p>
<p>Slow down to 1/2 speed (speed = 0.5) with a oscillogram at the bottom (osc = TRUE):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="va">canyon_wren</span>, wl <span class="op">=</span> <span class="fl">300</span>, </span>
<span>              t.display <span class="op">=</span> <span class="fl">1.7</span>, pal <span class="op">=</span> <span class="va">viridis</span>, </span>
<span>              grid <span class="op">=</span> <span class="cn">FALSE</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">9</span><span class="op">)</span>, </span>
<span>              width <span class="op">=</span> <span class="fl">1000</span>, height <span class="op">=</span> <span class="fl">500</span>, res <span class="op">=</span> <span class="fl">120</span>, </span>
<span>              file.name <span class="op">=</span> <span class="st">"slow.mp4"</span>, colbg <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>              speed <span class="op">=</span> <span class="fl">0.5</span>, osc <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>              colwave <span class="op">=</span> <span class="st">"#31688E99"</span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/0eb2ed26-d2e7-451e-ba00-3c2ec527bafe" class="external-link uri">https://github.com/user-attachments/assets/0eb2ed26-d2e7-451e-ba00-3c2ec527bafe</a></p>
<p>Long-billed hermit song at 1/5 speed (speed = 0.5), removing axes and looping 3 times (loop = 3:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Phae.long4"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="va">Phae.long4</span>, wl <span class="op">=</span> <span class="fl">300</span>, </span>
<span>    t.display <span class="op">=</span> <span class="fl">1.7</span>, ovlp <span class="op">=</span> <span class="fl">90</span>, pal <span class="op">=</span> <span class="va">magma</span>, </span>
<span>    grid <span class="op">=</span> <span class="cn">FALSE</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">1000</span>, </span>
<span>    height <span class="op">=</span> <span class="fl">500</span>, res <span class="op">=</span> <span class="fl">120</span>, collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">50</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>, </span>
<span>    file.name <span class="op">=</span> <span class="st">"no_axis.mp4"</span>, colbg <span class="op">=</span> <span class="st">"black"</span>, </span>
<span>    speed <span class="op">=</span> <span class="fl">0.2</span>, axis.type <span class="op">=</span> <span class="st">"none"</span>, loop <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/a35b145e-2295-4050-811a-7d942cb56a92" class="external-link uri">https://github.com/user-attachments/assets/a35b145e-2295-4050-811a-7d942cb56a92</a></p>
<p>Visualizing a northern nightingale wren recording from <a href="https://www.xeno-canto.org" class="external-link">xeno-canto</a> using a custom color palette:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">ngh_wren</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://marce10.github.io/warbleR/reference/read_sound_file.html" class="external-link">read_sound_file</a></span><span class="op">(</span><span class="st">"https://www.xeno-canto.org/518334/download"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">custom_pal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/colorRamp.html" class="external-link">colorRampPalette</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2d2d86"</span>, <span class="st">"#2d2d86"</span>, <span class="fu"><a href="https://rdrr.io/pkg/seewave/man/seewave.internal.html" class="external-link">reverse.terrain.colors</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="va">ngh_wren</span>, wl <span class="op">=</span> <span class="fl">600</span>, </span>
<span>    t.display <span class="op">=</span> <span class="fl">3</span>, ovlp <span class="op">=</span> <span class="fl">95</span>, pal <span class="op">=</span> <span class="va">custom_pal</span>, </span>
<span>    grid <span class="op">=</span> <span class="cn">FALSE</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">8</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">700</span>, </span>
<span>    height <span class="op">=</span> <span class="fl">250</span>, res <span class="op">=</span> <span class="fl">100</span>, collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">40</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>    file.name <span class="op">=</span> <span class="st">"../nightingale_wren.mp4"</span>, colbg <span class="op">=</span> <span class="st">"#2d2d86"</span>, lcol <span class="op">=</span> <span class="st">"#FFFFFFE6"</span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/23871d8a-e555-4cd9-bae2-0e680fb2c305" class="external-link uri">https://github.com/user-attachments/assets/23871d8a-e555-4cd9-bae2-0e680fb2c305</a></p>
<p>Spix’s disc-winged bat inquiry call slow down (speed = 0.05):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"thyroptera.est"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract one call</span></span>
<span><span class="va">thy_wav</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">thyroptera.est</span><span class="op">)</span><span class="op">$</span><span class="va">wave.objects</span><span class="op">[[</span><span class="fl">12</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># add silence at both "sides""</span></span>
<span><span class="va">thy_wav</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seewave/man/pastew.html" class="external-link">pastew</a></span><span class="op">(</span><span class="fu">tuneR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/Waveforms.html" class="external-link">silence</a></span><span class="op">(</span>duration <span class="op">=</span> <span class="fl">0.05</span>, </span>
<span>            samp.rate <span class="op">=</span> <span class="va">thy_wav</span><span class="op">@</span><span class="va">samp.rate</span>, xunit <span class="op">=</span> <span class="st">"time"</span><span class="op">)</span>,</span>
<span>            <span class="va">thy_wav</span>, output <span class="op">=</span> <span class="st">"Wave"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">thy_wav</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seewave/man/pastew.html" class="external-link">pastew</a></span><span class="op">(</span><span class="va">thy_wav</span>, <span class="fu">tuneR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/Waveforms.html" class="external-link">silence</a></span><span class="op">(</span>duration <span class="op">=</span> <span class="fl">0.04</span>, </span>
<span>            samp.rate <span class="op">=</span> <span class="va">thy_wav</span><span class="op">@</span><span class="va">samp.rate</span>, xunit <span class="op">=</span> <span class="st">"time"</span><span class="op">)</span>,</span>
<span>            output <span class="op">=</span> <span class="st">"Wave"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="va">thy_wav</span>, wl <span class="op">=</span> <span class="fl">400</span>, </span>
<span>    t.display <span class="op">=</span> <span class="fl">0.08</span>, ovlp <span class="op">=</span> <span class="fl">95</span>, pal <span class="op">=</span> <span class="va">inferno</span>, </span>
<span>    grid <span class="op">=</span> <span class="cn">FALSE</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">37</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">700</span>, </span>
<span>    height <span class="op">=</span> <span class="fl">250</span>, res <span class="op">=</span> <span class="fl">100</span>, collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">40</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>    file.name <span class="op">=</span> <span class="st">"thyroptera_osc.mp4"</span>, colbg <span class="op">=</span> <span class="st">"black"</span>, lcol <span class="op">=</span> <span class="st">"#FFFFFFE6"</span>, </span>
<span>    speed <span class="op">=</span> <span class="fl">0.05</span>, fps <span class="op">=</span> <span class="fl">200</span>, buffer <span class="op">=</span> <span class="fl">0</span>, loop <span class="op">=</span> <span class="fl">4</span>, lty <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    osc <span class="op">=</span> <span class="cn">TRUE</span>, colwave <span class="op">=</span> <span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">inferno</a></span><span class="op">(</span><span class="fl">10</span>, alpha <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/a0e4fdda-8aeb-4ee2-9192-0a260ba3dfdd" class="external-link uri">https://github.com/user-attachments/assets/a0e4fdda-8aeb-4ee2-9192-0a260ba3dfdd</a></p>
<div class="section level3">
<h3 id="further-customization">Further customization<a class="anchor" aria-label="anchor" href="#further-customization"></a>
</h3>
<p>The argument ‘spectro.call’ allows to insert customized spectrogram visualizations. For instance, the following code makes use of the <code><a href="https://marce10.github.io/warbleR/reference/color_spectro.html" class="external-link">color_spectro()</a></code> function from <a href="https://cran.r-project.org/package=warbleR" class="external-link">warbleR</a> to highlight vocalizations from male and female house wrens with different colors (after downloading the selection table and sound file from figshare):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># get house wren male female duet recording</span></span>
<span><span class="va">hs_wren</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://marce10.github.io/warbleR/reference/read_sound_file.html" class="external-link">read_sound_file</a></span><span class="op">(</span><span class="st">"https://ndownloader.figshare.com/files/22722101"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># and extended selection table</span></span>
<span><span class="va">st</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"https://ndownloader.figshare.com/files/22722404"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create color column</span></span>
<span><span class="va">st</span><span class="op">$</span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"green"</span>, <span class="st">"yellow"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># highlight selections</span></span>
<span><span class="fu">color.spectro</span><span class="op">(</span>wave <span class="op">=</span> <span class="va">hs_wren</span>, wl <span class="op">=</span> <span class="fl">200</span>, ovlp <span class="op">=</span> <span class="fl">95</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>, </span>
<span>              collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">55</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>, dB <span class="op">=</span> <span class="st">"B"</span>, X <span class="op">=</span> <span class="va">st</span>, col.clm <span class="op">=</span> <span class="st">"colors"</span>, </span>
<span>              base.col <span class="op">=</span> <span class="st">"black"</span>,  t.mar <span class="op">=</span> <span class="fl">0.07</span>, f.mar <span class="op">=</span> <span class="fl">0.1</span>, strength <span class="op">=</span> <span class="fl">3</span>, </span>
<span>              interactive <span class="op">=</span> <span class="cn">NULL</span>, bg.col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/colored_spectro_house_wren_duet.png" alt="house wren duet"></p>
<p>The male part is shown in green and the female part in yellow.</p>
<p>We can wrap the <code><a href="https://marce10.github.io/warbleR/reference/color_spectro.html" class="external-link">color_spectro()</a></code> call using the <code><a href="https://rdrr.io/r/base/call.html" class="external-link">call()</a></code> function form base R and input that into <code><a href="reference/scrolling_spectro.html">scrolling_spectro()</a></code> using the argument ‘spectro.call’:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save call</span></span>
<span><span class="va">sp_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></span><span class="op">(</span></span>
<span>  <span class="st">"color.spectro"</span>,</span>
<span>  wave <span class="op">=</span> <span class="va">hs_wren</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  ovlp <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">55</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  strength <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  dB <span class="op">=</span> <span class="st">"B"</span>,</span>
<span>  X <span class="op">=</span> <span class="va">st</span>,</span>
<span>  col.clm <span class="op">=</span> <span class="st">"colors"</span>,</span>
<span>  base.col <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  t.mar <span class="op">=</span> <span class="fl">0.07</span>,</span>
<span>  f.mar <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  interactive <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bg.col <span class="op">=</span> <span class="st">"black"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create dynamic spectrogram</span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">hs_wren</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">512</span>,</span>
<span>  t.display <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>  pal <span class="op">=</span> <span class="va">reverse.gray.colors.1</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>  loop <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  spectro.call <span class="op">=</span> <span class="va">sp_cl</span>,</span>
<span>  fps <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  file.name <span class="op">=</span> <span class="st">"yellow_and_green.mp4"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/71636997-ddb5-4243-8774-c6843ad76db5" class="external-link uri">https://github.com/user-attachments/assets/71636997-ddb5-4243-8774-c6843ad76db5</a></p>
<p>This option can be mixed with any of the other customizations in the function, as adding an oscillogram:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># create dynamic spectrogram</span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">hs_wren</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">512</span>,</span>
<span>  osc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  t.display <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>  pal <span class="op">=</span> <span class="va">reverse.gray.colors.1</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>  loop <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  spectro.call <span class="op">=</span> <span class="va">sp_cl</span>,</span>
<span>  fps <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  file.name <span class="op">=</span> <span class="st">"yellow_and_green_oscillo.mp4"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/41ca7f67-c121-4c60-8b66-31fceff00c33" class="external-link uri">https://github.com/user-attachments/assets/41ca7f67-c121-4c60-8b66-31fceff00c33</a></p>
<p>A viridis color palette:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">st</span><span class="op">$</span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">8</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">sp_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></span><span class="op">(</span></span>
<span>  <span class="st">"color.spectro"</span>,</span>
<span>  wave <span class="op">=</span> <span class="va">hs_wren</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  ovlp <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">55</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  dB <span class="op">=</span> <span class="st">"B"</span>,</span>
<span>  X <span class="op">=</span> <span class="va">st</span>,</span>
<span>  col.clm <span class="op">=</span> <span class="st">"colors"</span>,</span>
<span>  base.col <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  t.mar <span class="op">=</span> <span class="fl">0.07</span>,</span>
<span>  f.mar <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  strength <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  interactive <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create dynamic spectrogram</span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">hs_wren</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  osc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  t.display <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>  pal <span class="op">=</span> <span class="va">reverse.gray.colors.1</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>  loop <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  colwave <span class="op">=</span> <span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  spectro.call <span class="op">=</span> <span class="va">sp_cl</span>,</span>
<span>  fps <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  file.name <span class="op">=</span> <span class="st">"viridis.mp4"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/e1bf389e-6056-4df0-a23b-b09d7e65e952" class="external-link uri">https://github.com/user-attachments/assets/e1bf389e-6056-4df0-a23b-b09d7e65e952</a></p>
<p>Or simply a gray scale:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">st</span><span class="op">$</span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gray"</span>, <span class="st">"gray49"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sp_cl</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></span><span class="op">(</span></span>
<span>    <span class="st">"color.spectro"</span>,</span>
<span>    wave <span class="op">=</span> <span class="va">hs_wren</span>,</span>
<span>    wl <span class="op">=</span> <span class="fl">200</span>,</span>
<span>    ovlp <span class="op">=</span> <span class="fl">95</span>,</span>
<span>    flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>    collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">55</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>    dB <span class="op">=</span> <span class="st">"B"</span>,</span>
<span>    X <span class="op">=</span> <span class="va">st</span>,</span>
<span>    col.clm <span class="op">=</span> <span class="st">"colors"</span>,</span>
<span>    base.col <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    t.mar <span class="op">=</span> <span class="fl">0.07</span>,</span>
<span>    f.mar <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    strength <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    interactive <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># create dynamic spectrogram</span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">hs_wren</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">512</span>,</span>
<span>  osc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  t.display <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>  pal <span class="op">=</span> <span class="va">reverse.gray.colors.1</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">13</span><span class="op">)</span>,</span>
<span>  loop <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  spectro.call <span class="op">=</span> <span class="va">sp_cl</span>,</span>
<span>  fps <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  file.name <span class="op">=</span> <span class="st">"gray.mp4"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/8efc0019-ea82-4ace-8176-3abd0315ae5a" class="external-link uri">https://github.com/user-attachments/assets/8efc0019-ea82-4ace-8176-3abd0315ae5a</a></p>
<p>The ‘spectro.call’ argument can also be used to add annotations. To do this we need to wrap up both the spectrogram function and the annotation functions (i.e. <code><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text()</a></code>, <code><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines()</a></code>) in a single function and then save the call to that function:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># create color column</span></span>
<span><span class="va">st</span><span class="op">$</span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">8</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># create label column</span></span>
<span><span class="va">st</span><span class="op">$</span><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># shrink end of second selection (purely aesthetics)</span></span>
<span><span class="va">st</span><span class="op">$</span><span class="va">end</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">3.87</span></span>
<span></span>
<span><span class="co"># function to highlight selections</span></span>
<span><span class="va">ann_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">wave</span>, <span class="va">X</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># print spectrogram</span></span>
<span>  <span class="fu">color.spectro</span><span class="op">(</span></span>
<span>    wave <span class="op">=</span> <span class="va">wave</span>,</span>
<span>    wl <span class="op">=</span> <span class="fl">200</span>,</span>
<span>    ovlp <span class="op">=</span> <span class="fl">95</span>,</span>
<span>    flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">18.6</span><span class="op">)</span>,</span>
<span>    collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">55</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>    dB <span class="op">=</span> <span class="st">"B"</span>,</span>
<span>    X <span class="op">=</span> <span class="va">X</span>,</span>
<span>    col.clm <span class="op">=</span> <span class="st">"colors"</span>,</span>
<span>    base.col <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    t.mar <span class="op">=</span> <span class="fl">0.07</span>,</span>
<span>    f.mar <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    strength <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    interactive <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># annotate each selection in X</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">e</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># label</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">X</span><span class="op">$</span><span class="va">start</span><span class="op">[</span><span class="va">e</span><span class="op">]</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="va">X</span><span class="op">$</span><span class="va">end</span><span class="op">[</span><span class="va">e</span><span class="op">]</span> <span class="op">-</span> <span class="va">X</span><span class="op">$</span><span class="va">start</span><span class="op">[</span><span class="va">e</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>      y <span class="op">=</span> <span class="fl">16.5</span>,</span>
<span>      labels <span class="op">=</span> <span class="va">X</span><span class="op">$</span><span class="va">labels</span><span class="op">[</span><span class="va">e</span><span class="op">]</span>,</span>
<span>      cex <span class="op">=</span> <span class="fl">3.3</span>,</span>
<span>      col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/adjustcolor.html" class="external-link">adjustcolor</a></span><span class="op">(</span><span class="va">X</span><span class="op">$</span><span class="va">colors</span><span class="op">[</span><span class="va">e</span><span class="op">]</span>, <span class="fl">0.6</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># line</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">X</span><span class="op">$</span><span class="va">start</span><span class="op">[</span><span class="va">e</span><span class="op">]</span>, <span class="va">X</span><span class="op">$</span><span class="va">end</span><span class="op">[</span><span class="va">e</span><span class="op">]</span><span class="op">)</span>,</span>
<span>      y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14.5</span>, <span class="fl">14.5</span><span class="op">)</span>,</span>
<span>      lwd <span class="op">=</span> <span class="fl">6</span>,</span>
<span>      col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/adjustcolor.html" class="external-link">adjustcolor</a></span><span class="op">(</span><span class="st">"gray50"</span>, <span class="fl">0.3</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># save call</span></span>
<span><span class="va">ann_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></span><span class="op">(</span><span class="st">"ann_fun"</span>, wave <span class="op">=</span> <span class="va">hs_wren</span>, X <span class="op">=</span> <span class="va">st</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create annotated dynamic spectrogram</span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">hs_wren</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  t.display <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">18.6</span><span class="op">)</span>,</span>
<span>  loop <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  speed <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  spectro.call <span class="op">=</span> <span class="va">ann_cl</span>,</span>
<span>  fps <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  file.name <span class="op">=</span> <span class="st">"../viridis_annotated.mp4"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/b72e466a-b88a-4804-8f95-5960b3749e9c" class="external-link uri">https://github.com/user-attachments/assets/b72e466a-b88a-4804-8f95-5960b3749e9c</a></p>
<p>Finally, the argument ‘annotation.call’ can be used to add static labels (i.e. non-scrolling). It works similar to ‘spectro.call’, but requires a call from <code><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text()</a></code>. This let users customize things as size, color, position, font, and additional arguments taken by <code><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text()</a></code>. The call should also include the argmuents ‘start’ and ‘end’ to indicate the time at which the labels are displayed (in s). ‘fading’ is optional and allows fade-in and fade-out effects on labels (in s as well). The following code downloads a recording containing several frog species recorded in Costa Rica from figshare, cuts a clip including two species and labels it with a single label:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co"># read data from figshare</span></span>
<span><span class="va">frogs</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://marce10.github.io/warbleR/reference/read_sound_file.html" class="external-link">read_sound_file</a></span><span class="op">(</span><span class="st">"https://ndownloader.figshare.com/files/22829075"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># cut a couple of species</span></span>
<span><span class="va">shrt_frgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seewave/man/cutw.html" class="external-link">cutw</a></span><span class="op">(</span><span class="va">frogs</span>,</span>
<span>                  from <span class="op">=</span> <span class="fl">35.3</span>,</span>
<span>                  to <span class="op">=</span> <span class="fl">50.5</span>,</span>
<span>                  output <span class="op">=</span> <span class="st">"Wave"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make annotation call</span></span>
<span><span class="va">ann_cll</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></span><span class="op">(</span></span>
<span>  <span class="st">"text"</span>,</span>
<span>  x <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  y <span class="op">=</span> <span class="fl">0.87</span>,</span>
<span>  labels <span class="op">=</span> <span class="st">"Frog calls"</span>,</span>
<span>  cex <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  start <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  end <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"#FFEA46CC"</span>,</span>
<span>  font <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  fading <span class="op">=</span> <span class="fl">0.6</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create dynamic spectro</span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">shrt_frgs</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">512</span>,</span>
<span>  ovlp <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  t.display <span class="op">=</span> <span class="fl">1.1</span>,</span>
<span>  pal <span class="op">=</span> <span class="va">cividis</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5.5</span><span class="op">)</span>,</span>
<span>  loop <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">1200</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">550</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">40</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  lcol <span class="op">=</span>  <span class="st">"#FFFFFFCC"</span>,</span>
<span>  colbg <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  fps <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  file.name <span class="op">=</span> <span class="st">"../frogs.mp4"</span>,</span>
<span>  osc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  height.prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  colwave <span class="op">=</span> <span class="st">"#31688E"</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  annotation.call <span class="op">=</span> <span class="va">ann_cll</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/ee6c170b-9412-475c-be53-f17d3748c992" class="external-link uri">https://github.com/user-attachments/assets/ee6c170b-9412-475c-be53-f17d3748c992</a></p>
<p>The argument accepts more than one labels as in a regular <code><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text()</a></code> call. In that case ‘start’ and ‘end’ values should be supplied for each label:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co"># make annotation call for 2 annotations</span></span>
<span><span class="va">ann_cll</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">call</a></span><span class="op">(</span></span>
<span>  <span class="st">"text"</span>,</span>
<span>  x <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  y <span class="op">=</span> <span class="fl">0.87</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Dendropsophus ebraccatus"</span>, <span class="st">"Eleutherodactylus coqui"</span><span class="op">)</span>,</span>
<span>  cex <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.5</span>, <span class="fl">14.8</span><span class="op">)</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"#FFEA46CC"</span>,</span>
<span>  font <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  fading <span class="op">=</span> <span class="fl">0.6</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create dynamic spectro</span></span>
<span><span class="fu"><a href="reference/scrolling_spectro.html">scrolling_spectro</a></span><span class="op">(</span></span>
<span>  wave <span class="op">=</span> <span class="va">shrt_frgs</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">512</span>,</span>
<span>  ovlp <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  t.display <span class="op">=</span> <span class="fl">1.1</span>,</span>
<span>  pal <span class="op">=</span> <span class="va">cividis</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5.5</span><span class="op">)</span>,</span>
<span>  loop <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">1200</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">550</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">40</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  lcol <span class="op">=</span>  <span class="st">"#FFFFFFCC"</span>,</span>
<span>  colbg <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  fps <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  file.name <span class="op">=</span> <span class="st">"../frogs_sp_labels.mp4"</span>,</span>
<span>  osc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  height.prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  colwave <span class="op">=</span> <span class="st">"#31688E"</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  annotation.call <span class="op">=</span> <span class="va">ann_cll</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><a href="https://github.com/user-attachments/assets/bbd9ea9c-b153-4f4d-a56f-ea851c231151" class="external-link uri">https://github.com/user-attachments/assets/bbd9ea9c-b153-4f4d-a56f-ea851c231151</a></p>
<hr>
</div>
</div>
<div class="section level1">
<h1 id="matts-approach-paged-dynamic-spectrograms">Matt’s approach: “Paged Dynamic Spectrograms”<a class="anchor" aria-label="anchor" href="#matts-approach-paged-dynamic-spectrograms"></a>
</h1>
<hr>
<div class="section level3">
<h3 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Tweak your spectrogram settings using the prep_static_ggspectro() function – aka prepStaticSpec() – storing results in variable. You can also just segment and export static specs at this step.</li>
<li>Feed variable into paged_spectro() – aka pagedSpec() – to generate a dynamic spectrogram
<ul>
<li>It does this by exporting a PNG of the testSpec() ggplot function;</li>
<li>Import PNG as a new ggplot raster layer</li>
<li>Overlay a series of translucent highlight boxes that disolve away using gganimate</li>
</ul>
</li>
</ol>
<!-- --><div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">#list WAVs included with dynaSpec</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>(f<span class="ot">&lt;-</span><span class="fu">system.file</span>(<span class="at">package=</span><span class="st">"dynaSpec"</span>) <span class="sc">|&gt;</span> <span class="fu">list.files</span>(<span class="at">pattern=</span><span class="st">".wav"</span>,<span class="at">full.names=</span>T))</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co">#store output and save spectrogram to working directory</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>params <span class="ot">&lt;-</span><span class="fu">prep_static_ggspectro</span>(f[<span class="dv">1</span>],<span class="at">destFolder=</span><span class="st">"wd"</span>,<span class="at">savePNG=</span>T)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="static-spectrogram-of-a-female-barn-swallow-song">Static spectrogram of a female barn swallow song<a class="anchor" aria-label="anchor" href="#static-spectrogram-of-a-female-barn-swallow-song"></a>
</h3>
<figure><img src="reference/figures/femaleBarnSwallow_1.png" alt="Static Spectrogram of a female barn swallow song"><figcaption aria-hidden="true">
Static Spectrogram of a female barn swallow song
</figcaption></figure><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#let's add axes</span></span>
<span><span class="va">femaleBarnSwallow</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/prep_static_ggspectro.html">prep_static_ggspectro</a></span><span class="op">(</span></span>
<span>    <span class="va">f</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>    destFolder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    savePNG <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    onlyPlotSpec <span class="op">=</span> <span class="cn">F</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<figure><img src="reference/figures/femaleBarnSwallow_1b.png" alt="Static spectrogram with axis labels for female barn swallow song"><figcaption aria-hidden="true">
Static spectrogram with axis labels for female barn swallow song
</figcaption></figure><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Now generate a dynamic spectrogram</span></span>
<span><span class="fu"><a href="reference/paged_spectro.html">paged_spectro</a></span><span class="op">(</span><span class="va">femaleBarnSwallow</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dynamic-spectrogram-of-a-female-barn-swallow-song">Dynamic spectrogram of a female barn swallow song<a class="anchor" aria-label="anchor" href="#dynamic-spectrogram-of-a-female-barn-swallow-song"></a>
</h3>
<p><a href="https://github.com/user-attachments/assets/618260a3-fdcc-46aa-a36b-e8a8a1d78d9a" class="external-link uri">https://github.com/user-attachments/assets/618260a3-fdcc-46aa-a36b-e8a8a1d78d9a</a></p>
</div>
<div class="section level3">
<h3 id="now-brighten-the-spec-using-the-amptrans-parameter">Now brighten the spec using the ampTrans parameter<a class="anchor" aria-label="anchor" href="#now-brighten-the-spec-using-the-amptrans-parameter"></a>
</h3>
<ul>
<li>ampTrans=3 is a nonlinear signal booster. Basically collapses the difference between loudest and quietest values (higher values= brighter specs); 1 (default) means no transformation</li>
<li>Here, I also lowered the decibel threshold to include some quieter sounds with min_dB=-35; default is -30</li>
<li>bgFlood=T makes the axis area the same color as the plot background. It will automatically switch to white axis font if background is too dark.</li>
<li>Then generate dynamic spectrogram</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/prep_static_ggspectro.html">prep_static_ggspectro</a></span><span class="op">(</span></span>
<span>    <span class="va">f</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>    min_dB <span class="op">=</span> <span class="op">-</span><span class="fl">35</span>,</span>
<span>    savePNG <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    destFolder <span class="op">=</span> <span class="st">"wd"</span>,</span>
<span>    onlyPlotSpec <span class="op">=</span> <span class="cn">F</span>,</span>
<span>    bgFlood <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    ampTrans <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/paged_spectro.html">paged_spectro</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span> </span></code></pre></div>
<figure><img src="reference/figures/femaleBarnSwallow_1c.png" alt="Static spectrogram with axis labels for female barn swallow song"><figcaption aria-hidden="true">
Static spectrogram with axis labels for female barn swallow song
</figcaption></figure><p><a href="https://github.com/user-attachments/assets/ef7a2802-3d19-4d5a-a902-71495f47f10f" class="external-link uri">https://github.com/user-attachments/assets/ef7a2802-3d19-4d5a-a902-71495f47f10f</a></p>
</div>
<div class="section level3">
<h3 id="now-also-supports-mp3-files-web-or-local-and-multi-page-dynamic-spectrograms-ie-cropping-and-segmenting-spectrograms-from-larger-recording-files">Now also supports .mp3 files (web or local) and multi-page dynamic spectrograms (i.e. cropping and segmenting spectrograms from larger recording files)<a class="anchor" aria-label="anchor" href="#now-also-supports-mp3-files-web-or-local-and-multi-page-dynamic-spectrograms-ie-cropping-and-segmenting-spectrograms-from-larger-recording-files"></a>
</h3>
<ul>
<li>Long files may take a long time to render, depending on CPU power…
<ul>
<li>the default is to not plot axes and labels (onlyPlotSpec=T)</li>
<li>crop=12 is interpreted as: only use the first 12 seconds of the file; can also specify interval w/ c(0,12)</li>
<li>xLim=3 specifies the “page window” i.e. how many seconds each “page” of the dynamic spectrogram should display, here 3 sec</li>
<li>here we also limit the yLim of the plot to the vocalized frequencies from 0 to 700 Hz (0.7 kHz)</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">whale</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/prep_static_ggspectro.html">prep_static_ggspectro</a></span><span class="op">(</span></span>
<span>    <span class="st">"http://www.oceanmammalinst.org/songs/hmpback3.wav"</span>,</span>
<span>    savePNG <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    destFolder <span class="op">=</span> <span class="st">"wd"</span>,</span>
<span>    yLim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">.7</span><span class="op">)</span>,</span>
<span>    crop <span class="op">=</span> <span class="fl">12</span>,</span>
<span>    xLim <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    ampTrans <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="reference/paged_spectro.html">paged_spectro</a></span><span class="op">(</span><span class="va">whale</span><span class="op">)</span></span>
<span><span class="co">#Voila 🐋</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="static-whale-song-spectrogram">Static whale song spectrogram<a class="anchor" aria-label="anchor" href="#static-whale-song-spectrogram"></a>
</h3>
<figure><img src="reference/figures/humpback.png" alt="Humpback whale song spectrogram"><figcaption aria-hidden="true">
Humpback whale song spectrogram
</figcaption></figure>
</div>
<div class="section level3">
<h3 id="dynamic-multipage-whale-song-spectrogram">Dynamic multipage whale song spectrogram<a class="anchor" aria-label="anchor" href="#dynamic-multipage-whale-song-spectrogram"></a>
</h3>
<p><a href="https://github.com/user-attachments/assets/ed75fd8f-1a0e-475a-95b9-2df809caa695" class="external-link uri">https://github.com/user-attachments/assets/ed75fd8f-1a0e-475a-95b9-2df809caa695</a></p>
</div>
<div class="section level3">
<h3 id="example-using-xeno-canto-to-generate-a-multi-page-dynamic-spectrogram-of-a-common-nighthawk-call-w-different-color-scheme">Example using Xeno-Canto to generate a multi-page dynamic spectrogram of a common nighthawk call (w/ different color scheme)<a class="anchor" aria-label="anchor" href="#example-using-xeno-canto-to-generate-a-multi-page-dynamic-spectrogram-of-a-common-nighthawk-call-w-different-color-scheme"></a>
</h3>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">song</span> <span class="op">=</span> <span class="st">"https://www.xeno-canto.org/sounds/uploaded/SPMWIWZKKC/XC490771-190804_1428_CONI.mp3"</span></span>
<span></span>
<span><span class="va">temp</span> <span class="op">=</span> <span class="fu"><a href="reference/prep_static_ggspectro.html">prep_static_ggspectro</a></span><span class="op">(</span></span>
<span>  <span class="va">song</span>,</span>
<span>  crop <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  xLim <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  colPal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"white"</span>, <span class="st">"black"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/paged_spectro.html">paged_spectro</a></span><span class="op">(</span></span>
<span>  <span class="va">temp</span>,</span>
<span>  vidName <span class="op">=</span> <span class="st">"nightHawk"</span> ,</span>
<span>  highlightCol <span class="op">=</span> <span class="st">"#d1b0ff"</span>,</span>
<span>  cursorCol <span class="op">=</span> <span class="st">"#7817ff"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="nighthawk-multipage-dynamic-spec">Nighthawk multipage dynamic spec<a class="anchor" aria-label="anchor" href="#nighthawk-multipage-dynamic-spec"></a>
</h3>
<p><a href="https://github.com/user-attachments/assets/ad4b635b-804d-4340-965c-d382376aabb6" class="external-link uri">https://github.com/user-attachments/assets/ad4b635b-804d-4340-965c-d382376aabb6</a></p>
<p>Enjoy! Please share your specs with us on X <a href="https://x.com/mattwilkinsbio" class="external-link">@mattwilkinsbio</a></p>
<hr>
<p>Please cite <a href="https://marce10.github.io/dynaSpec/">dynaSpec</a> as follows:</p>
<p>Araya-Salas, Marcelo and Wilkins, Matthew R. (2020), <em>dynaSpec: dynamic spectrogram visualizations in R</em>. R package version 1.0.0.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=dynaSpec" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/maRce10/dynaSpec/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/maRce10/dynaSpec/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dynaSpec</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Marcelo Araya-Salas <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3594-619X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-brightgreen.svg" alt="lifecycle"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://www.gnu.org/licenses/gpl-3.0.en.html" class="external-link"><img src="https://img.shields.io/badge/https://img.shields.io/badge/licence-GPL--2-blue.svg" alt="Licence"></a></li>
<li><a href="https://cran.r-project.org/" class="external-link"><img src="https://img.shields.io/badge/R%3E%3D-%3E=%203.2.1-6666ff.svg" alt="minimal R version"></a></li>
<li><a href="https://cran.r-project.org/package=dynaSpec" class="external-link"><img src="https://www.r-pkg.org/badges/version/dynaSpec" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cranlogs.r-pkg.org/badges/grand-total/dynaSpec" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/dynaSpec" alt="Total Downloads"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcelo Araya-Salas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
